---
import '../styles/global.css';

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="az">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content="ProqramlaÅŸdÄ±rma RoadmaplarÄ±" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title} | Roadmap</title>
  </head>
  <body style="margin: 0; padding: 0; font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;">
    <!-- Top Navigation -->
    <nav style="position: sticky; top: 0; z-index: 50; background-color: white; border-bottom: 1px solid #ddd; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
      <div style="max-width: 1600px; margin: 0 auto; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center;">
        <a href="/" style="font-size: 1.5rem; font-weight: 700; color: #3b82f6; text-decoration: none;">
          ðŸ“š Roadmap
        </a>
        <div style="display: flex; gap: 2rem; font-size: 0.95rem;">
          <a href="/c-roadmap" style="color: #333; text-decoration: none; font-weight: 500;">C Dili</a>
          <a href="/vim-roadmap" style="color: #333; text-decoration: none; font-weight: 500;">Vim</a>
          <a href="/git-roadmap" style="color: #333; text-decoration: none; font-weight: 500;">Git</a>          <a href=\"/linux-roadmap\" style=\"color: #333; text-decoration: none; font-weight: 500;\">Linux</a>        </div>
      </div>
    </nav>

    <div style="display: flex;">
      <!-- Sidebar TOC -->
      <aside style=\"position: fixed; left: 0; top: 60px; width: 280px; height: calc(100vh - 60px); background-color: #f9f9f9; border-right: 1px solid #ddd; overflow-y: auto; padding: 1.5rem 0; display: flex; flex-direction: column;\">
        <div style=\"padding: 0 1.5rem; margin-bottom: 1.5rem; flex-shrink: 0;\">
          <input 
            type=\"text\" 
            id=\"searchToc\" 
            placeholder=\"MÃ¶vzu axtar...\" 
            style=\"width: 100%; padding: 0.5rem 0.75rem; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem; box-sizing: border-box;\"
          />
        </div>
        
        <div style=\"flex: 1; overflow-y: auto; padding: 0 0.5rem;\">
          <nav id=\"tocNav\" style=\"font-size: 0.9rem;\">
            <!-- Auto-populated by JavaScript -->
          </nav>
        </div>
        
        <div style=\"padding: 1.5rem; border-top: 1px solid #ddd; flex-shrink: 0; font-size: 0.85rem; color: #666;\">
          <p style=\"margin: 0; padding-bottom: 0.5rem;\">
            <strong>SÃ¼rÉ™tli keÃ§id:</strong>
          </p>
          <ul style=\"margin: 0.5rem 0; padding-left: 1rem; list-style: none;\">
            <li><a href=\"#\" onclick=\"document.querySelector('h1')?.scrollIntoView({behavior: 'smooth'})\" style=\"color: #3b82f6; text-decoration: none; cursor: pointer;\">ÃœstÉ™ qayÄ±t â†‘</a></li>
          </ul>
        </div>
      </aside>

      <!-- Main Content -->
      <main style=\"margin-left: 280px; flex: 1; min-height: calc(100vh - 60px); background-color: white;\">
        <article style="max-width: 900px; margin: 0 auto; padding: 3rem 2rem;">
          <div class="prose">
            <slot />
          </div>
        </article>
      </main>
    </div>

    <!-- Footer -->
    <footer style=\"background-color: #f5f5f5; border-top: 1px solid #ddd; padding: 2rem; margin-top: 3rem; margin-left: 280px;\">
      <div style=\"max-width: 900px; margin: 0 auto; text-align: center; color: #666; font-size: 0.9rem;\">
        <p>Â© 2026 ProqramlaÅŸdÄ±rma RoadmaplarÄ±. BÃ¼tÃ¼n hÃ¼quqlar qorunur.</p>
      </div>
    </footer>

    <script>
      // Dynamic Table of Contents Generation
      function generateTOC() {
        const article = document.querySelector('article');
        const headings = article.querySelectorAll('h2, h3, h4');
        const tocNav = document.getElementById('tocNav');
        const searchInput = document.getElementById('searchToc');
        
        const headingsList = [];
        
        headings.forEach((heading, index) => {
          if (!heading.id) {
            heading.id = 'heading-' + index;
          }
          
          const level = parseInt(heading.tagName[1]);
          headingsList.push({
            id: heading.id,
            text: heading.textContent,
            level: level
          });
        });
        
        // Render TOC
        function renderTOC(items = headingsList) {
          tocNav.innerHTML = items.map(item => {
            const indent = (item.level - 2) * 1 + 'rem';
            return `
              <div style=\"padding-left: ${indent}; margin-bottom: 0.5rem;\">
                <a href=\"#${item.id}\" style=\"color: #333; text-decoration: none; display: block; padding: 0.4rem 0.75rem; border-radius: 3px; transition: all 0.2s;\" onmouseover=\"this.style.backgroundColor='#e3f2fd'; this.style.color='#2196F3';\" onmouseout=\"this.style.backgroundColor='transparent'; this.style.color='#333';\">
                  ${item.text.substring(0, 50)}${item.text.length > 50 ? '...' : ''}
                </a>
              </div>
            `;
          }).join('');
        }
        
        renderTOC();
        
        // Search functionality
        searchInput.addEventListener('input', (e) => {
          const query = e.target.value.toLowerCase();
          const filtered = headingsList.filter(item => 
            item.text.toLowerCase().includes(query)
          );
          renderTOC(filtered);
        });
        
        // Highlight current section
        window.addEventListener('scroll', () => {
          headingsList.forEach(item => {
            const element = document.getElementById(item.id);
            const rect = element.getBoundingClientRect();
            const link = document.querySelector(`a[href=\"#${item.id}\"]`);
            
            if (rect.top > 0 && rect.top < window.innerHeight / 2) {
              document.querySelectorAll('#tocNav a').forEach(a => {
                a.style.fontWeight = '400';
                a.style.backgroundColor = 'transparent';
              });
              link.style.fontWeight = '600';
              link.style.backgroundColor = '#eff6ff';
              link.style.color = '#2196F3';
            }
          });
        });
      }
      
      // Wait for DOM to be ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', generateTOC);
      } else {
        generateTOC();
      }
    </script>
  </body>
</html>
